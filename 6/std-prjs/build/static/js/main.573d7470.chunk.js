(this["webpackJsonpstd-prjs"]=this["webpackJsonpstd-prjs"]||[]).push([[0],{148:function(e,t,n){e.exports={searchbox:"Search_searchbox__naNQ-"}},149:function(e,t,n){e.exports={card:"Card_card__1te4P"}},150:function(e,t,n){e.exports={searchable:"Searchable_searchable__1PYbh"}},151:function(e,t,n){e.exports={button:"Button_button__2lgkF"}},152:function(e,t,n){e.exports={nav:"Navigation_nav__INfuO"}},154:function(e,t,n){e.exports={find:"Find_find__26ki8"}},155:function(e,t,n){e.exports={popup:"Popup_popup__3TSql"}},162:function(e,t,n){},164:function(e,t,n){},175:function(e,t){},177:function(e,t){},188:function(e,t){},190:function(e,t){},215:function(e,t){},217:function(e,t){},218:function(e,t){},223:function(e,t){},225:function(e,t){},231:function(e,t){},233:function(e,t){},252:function(e,t){},264:function(e,t){},267:function(e,t){},271:function(e,t,n){"use strict";n.r(t);var r=n(7),c=n.n(r),s=n(146),u=n.n(s),a=(n(162),n(90)),o=n(1),i=n(33),j=n(14),d=n(11),l=n(0),b=n.n(l),p=(n(164),n(4)),O=function(e){return Object(p.jsx)("div",{children:e.elems})},h=n(147),x=n.n(h),f=n(148),m=n.n(f),g=n(149),v=n.n(g),w=function(e){return Object(p.jsx)("div",{className:"".concat(v.a.card," ").concat(e.className),children:e.children})},y=function(e){var t=x.a.generate();return Object(p.jsxs)(w,{className:m.a.searchbox,children:[Object(p.jsx)("label",{htmlFor:t,children:e.text}),Object(p.jsx)("input",{id:t,onChange:function(t){return e.onFilterUpdate(t.target.value.trim())}})]})},_=n(150),S=n.n(_),N=function(e,t,n){return function(c){var s=Object(r.useState)(""),u=Object(d.a)(s,2),a=u[0],o=u[1],i=Object(p.jsx)("p",{children:"Loading..."});if(c.elems){var j=c.elems.map((function(e,t){return[e,t]})).filter((function(e){var n=Object(d.a)(e,1)[0];return t(n).some((function(e){return e.includes(a)}))})).map((function(e){var t=Object(d.a)(e,2),r=t[0],c=t[1];return n(r,c)}));i=Object(p.jsx)(O,{elems:j})}return Object(p.jsxs)(w,{className:S.a.searchable,children:[Object(p.jsx)(y,{text:e,onFilterUpdate:o}),i]})}},k=n(62),C=n.n(k),F=function(e){var t=e.student,n=t.img?Object(p.jsx)("img",{src:t.img}):null;return Object(p.jsxs)(w,{className:C.a["student-card"],children:[Object(p.jsx)("h2",{children:t.name}),Object(p.jsx)("p",{children:t.description}),Object(p.jsxs)("p",{children:["Tags: ",t.tags]}),Object(p.jsxs)("p",{children:["Subjects: ",t.subjects]}),n]})},E=n(23),G=n(151),I=n.n(G),q=function(e){var t,n;return Object(p.jsx)("button",{type:e.type||"button",className:"".concat(I.a.button," ").concat(e.className),onClick:e.onClick,disabled:e.disabled,name:null!==(t=e.name)&&void 0!==t?t:"",value:null!==(n=e.value)&&void 0!==n?n:"",children:e.children})},A=n(63),R=n.n(A),L=function(e){return Object(p.jsx)(E.b,{to:"/".concat(e.type,"/").concat(e.to,"/send"),children:Object(p.jsx)(q,{className:"".concat(R.a.button," ").concat(e.className)})})},M=Object(r.createContext)({user:null,setUser:function(){},users:[],addUser:function(){},follows:{},dispatch:function(){},refresh:function(){}}),P=function(e){var t,n=Object(r.useContext)(M);if("group"===e.type)t=n.follows.groups;else{if("student"!==e.type)throw new Error("Invalid type");t=n.follows.students}return t.has(e.who)?Object(p.jsx)(q,{onClick:function(){n.dispatch({in:e.type,do:"remove",value:e.who})},children:"Unfollow"}):Object(p.jsx)(q,{onClick:function(){n.dispatch({in:e.type,do:"add",value:e.who})},children:"Follow"})},U=function(e){return Object(p.jsx)(E.b,{to:"/".concat(e.to,"/profile"),children:Object(p.jsx)(q,{children:"Check profile"})})},D=function(e){return Object(p.jsx)(E.b,{to:e.to,children:Object(p.jsx)(q,{children:e.text})})},T=function(e){return[e.description].concat(Object(j.a)(e.tags),Object(j.a)(e.subjects))},J=function(e,t){return Object(p.jsxs)(w,{className:C.a["student-entry"],children:[Object(p.jsx)(F,{student:e}),Object(p.jsx)(L,{type:"student",to:t}),Object(p.jsx)(P,{type:"student",who:e.name}),Object(p.jsx)(U,{to:t}),Object(p.jsx)(D,{to:"/edit/student/".concat(t),text:"Edit"})]},"student-"+t)},B=N("Find students",T,J),H=n(41),K=n.n(H),Z=function(e){return Object(p.jsxs)(w,{className:K.a["group-member"],children:[Object(p.jsxs)("h2",{children:["Role: ",e.role]}),Object(p.jsx)(F,{student:e.student})]})},z=function(e){var t=e.group;return Object(p.jsxs)(w,{className:K.a["group-card"],children:[Object(p.jsxs)("h1",{children:["Group: ",t.name]}),Object(p.jsx)(w,{children:Object(p.jsx)("p",{children:t.description})}),Object(p.jsxs)(w,{children:[Object(p.jsx)("h2",{children:"Members"}),t.members.map((function(t,n){return Object(p.jsx)(Z,{role:t.role,student:t.student},"group-".concat(e.i,"-student-").concat(n))}))]}),Object(p.jsxs)(w,{children:[Object(p.jsx)("h2",{children:"Subject"}),Object(p.jsx)("p",{children:t.subject})]})]})},W=function(e,t){return Object(p.jsxs)(w,{className:K.a["group-entry"],children:[Object(p.jsx)(z,{group:e,i:t}),Object(p.jsx)(L,{className:K.a["send-message-button"],type:"group",to:t}),Object(p.jsx)(P,{type:"group",who:e.name}),Object(p.jsx)(D,{to:"/edit/group/".concat(t),text:"Edit"})]},"group-"+t)},X=N("Find groups:",(function(e){return[e.name,e.description,e.subject].concat(Object(j.a)(e.members.flatMap((function(e){return[e.role].concat(Object(j.a)(T(e.student)))}))))}),W),Y=n(152),Q=n.n(Y),V=n(153),$=n(22),ee=n(17),te=Object(V.a)({apiKey:"AIzaSyCK1KZvmu5wseA1Tx1CqswgP-Hct_JRmU0",authDomain:"cool-piw-project.firebaseapp.com",projectId:"cool-piw-project",storageBucket:"cool-piw-project.appspot.com",messagingSenderId:"548158819330",appId:"1:548158819330:web:6f31cf7ccbf3c688db2b1b"}),ne=Object($.f)(te),re=Object(ee.g)(te),ce=n(56),se=new ee.c,ue=function(){var e=Object(o.a)(b.a.mark((function e(){var t,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ee.l)(re,se);case 3:return t=e.sent,n=t.user,r=Object($.c)(ne,"users",n.uid),e.next=8,Object($.d)(r);case 8:if(e.sent.exists()){e.next=12;break}return e.next=12,Object($.g)(r,{name:n.displayName,authProvider:"google",email:n.email});case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.error({err:e.t0}),alert(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){Object(ee.m)(re)},oe=function(){var e=Object(ce.a)(re),t=Object(d.a)(e,3),n=t[0],c=t[1],s=t[2],u=Object(ce.b)(re),a=Object(d.a)(u,3),o=a[0],i=a[1],j=a[2],l=Object(r.useContext)(M).refresh,b=Object(r.useState)(null),O=Object(d.a)(b,2),h=O[0],x=O[1],f=Object(r.useRef)(),m=Object(r.useRef)();if(!c&&!i&&!s&&!j){var g=n?Object(p.jsxs)(w,{children:[Object(p.jsxs)("p",{children:["Logged in as ",n.email,"."]}),Object(p.jsx)(q,{onClick:ae,children:"Logout"})]}):Object(p.jsx)(w,{children:Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.nativeEvent.submitter.value,n=f.current.value,r=m.current.value;switch(console.log(t),t){case"login":Object(ee.k)(re,n,r).catch((function(e){x(e)}));break;case"register":Object(ee.f)(re,n,r).then((function(e){o({displayName:e.user.email}).then((function(){l()}))})).catch((function(e){x(e)}));break;case"google":ue()}},children:[Object(p.jsx)("input",{ref:f,type:"text"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{ref:m,id:"login-password",type:"password"}),Object(p.jsx)("br",{}),Object(p.jsx)(q,{type:"submit",name:"action",value:"login",children:"Login"}),Object(p.jsx)(q,{type:"submit",name:"action",value:"register",children:"Register"}),Object(p.jsx)(q,{type:"submit",name:"action",value:"google",children:"Login with G00ble"}),h&&Object(p.jsxs)("p",{children:["WTF: ",h.message]})]})});return g}},ie=function(){var e=Object(ce.a)(re),t=Object(d.a)(e,3),n=t[0],r=t[1],c=t[2];return Object(p.jsx)("nav",{className:Q.a.nav,children:Object(p.jsx)(w,{children:Object(p.jsxs)("ul",{children:[Object(p.jsx)("li",{children:Object(p.jsx)(E.b,{to:"/add",children:Object(p.jsx)("button",{children:"Add Student/Group"})})}),Object(p.jsx)("li",{children:Object(p.jsx)(E.b,{to:"/students",children:Object(p.jsx)("button",{children:"Students"})})}),Object(p.jsx)("li",{children:Object(p.jsx)(E.b,{to:"/groups",children:Object(p.jsx)("button",{children:"Groups"})})}),Object(p.jsx)("li",{children:r?Object(p.jsx)("p",{children:"????"}):c?Object(p.jsxs)("p",{children:["Error gettin' auth state: ",c]}):Object(p.jsx)(E.b,{to:"/login",children:Object(p.jsx)("button",{children:n?n.displayName:"Login"})})}),Object(p.jsx)("li",{children:Object(p.jsx)(E.b,{to:"/following",children:Object(p.jsx)("button",{children:"Following"})})})]})})})},je=n(2),de=n(3),le=n(9),be=n(10),pe=n(32),Oe=n.n(pe),he=function(){var e=Object(o.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://picsum.photos/70/100").then((function(e){return e.url}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xe=function(e){var t,n=[Object(r.useRef)(),Object(r.useRef)(),Object(r.useRef)(),Object(r.useRef)(),Object(r.useRef)()],c=n[0],s=n[1],u=n[2],a=n[3],o=n[4];return Object(r.useEffect)((function(){var t=e.prototype;t&&(c.current.value=t.name,s.current.value=t.email,u.current.value=t.description,a.current.value=t.tags.join(" "),o.current.value=t.subjects.join(" "))}),[e.prototype]),Object(p.jsxs)("form",{className:Oe.a["add-student"],onSubmit:function(t){t.preventDefault();var n={name:c.current.value,email:s.current.value,description:u.current.value,tags:a.current.value.split(),subjects:o.current.value.split(),img:null};if(e.prototype)return n.uid=e.prototype.uid,n.img=e.prototype.img,console.log(n),void e.onNewStudent(n);he().then((function(e){n.img=e})).finally((function(){console.log(n),e.onNewStudent(n)}))},children:[Object(p.jsxs)(w,{children:[Object(p.jsx)("label",{htmlFor:"student-name",children:"Name:"}),Object(p.jsx)("input",{id:"student-name",type:"text",ref:c,required:!0})]}),Object(p.jsxs)(w,{children:[Object(p.jsx)("label",{htmlFor:"student-email",children:"Email:"}),Object(p.jsx)("input",{id:"student-email",type:"email",ref:s,required:!0})]}),Object(p.jsxs)(w,{children:[Object(p.jsx)("label",{htmlFor:"student-description",children:"Description:"}),Object(p.jsx)("br",{}),Object(p.jsx)("textarea",{id:"student-description",rows:"5",ref:u,required:!0})]}),Object(p.jsxs)(w,{children:[Object(p.jsx)("label",{htmlFor:"student-tags",children:"Tags:"}),Object(p.jsx)("input",{id:"student-tags",type:"text",ref:a,required:!0})]}),Object(p.jsxs)(w,{children:[Object(p.jsx)("label",{htmlFor:"student-subjects",children:"Subjects:"}),Object(p.jsx)("input",{id:"student-subjects",type:"text",ref:o,required:!0})]}),Object(p.jsx)("center",{children:Object(p.jsx)(q,{type:"submit",children:null!==(t=e.text)&&void 0!==t?t:"Add Student"})})]})},fe=n(154),me=n.n(fe),ge=function(e){return Object(p.jsx)("select",{className:"".concat(me.a.find," ").concat(e.className),name:e.name,required:!0,children:e.options.map((function(t,n){return Object(p.jsx)("option",{value:n,children:t},e.name+"-select-"+n)}))})},ve=function(e){Object(le.a)(n,e);var t=Object(be.a)(n);function n(e){var r;if(Object(je.a)(this,n),(r=t.call(this,e)).submitHandler=function(e){e.preventDefault();var t=r.state,n=t.groupName,c=t.description,s=t.subject,u=t.members,a={name:n,description:c,subject:s,members:u};r.state.uid&&(a.uid=r.state.uid),0!==u.length?r.props.onNewGroup(a):alert("Groups with no members are not allowed.")},r.addMember=function(e){r.state.members.length>=5?alert("Can't add another member."):0!==r.state.role.trim().length?(console.log(e),console.log(r.state.members),r.setState((function(t){return{members:[].concat(Object(j.a)(t.members),[{role:t.role,student:e}]),role:""}}))):alert("A group member must have a role.")},r.state={groupName:"",description:"",subject:"",members:[],role:""},e.prototype){var c=e.prototype;r.state={uid:c.uid,groupName:c.name,description:c.description,subject:c.subject,members:c.members,role:""}}return r}return Object(de.a)(n,[{key:"render",value:function(){var e,t=this;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("form",{className:Oe.a["add-group"],onSubmit:this.submitHandler,children:[Object(p.jsx)("center",{children:Object(p.jsx)(q,{type:"submit",children:null!==(e=this.props.text)&&void 0!==e?e:"Create group"})}),Object(p.jsxs)(w,{children:[Object(p.jsx)("label",{htmlFor:"group-name",children:"Name:"}),Object(p.jsx)("input",{id:"group-name",type:"text",value:this.state.groupName,onChange:function(e){return t.setState({groupName:e.target.value})},required:!0})]}),Object(p.jsxs)(w,{children:[Object(p.jsx)("label",{htmlFor:"group-description",children:"Description:"}),Object(p.jsx)("br",{}),Object(p.jsx)("textarea",{id:"group-description",rows:"5",value:this.state.description,onChange:function(e){return t.setState({description:e.target.value})},required:!0})]}),Object(p.jsxs)(w,{children:[Object(p.jsx)("label",{htmlFor:"group-subject",children:"Subject:"}),Object(p.jsx)("input",{id:"group-subject",type:"text",value:this.state.subject,onChange:function(e){return t.setState({subject:e.target.value})},required:!0})]}),Object(p.jsxs)(w,{className:Oe.a["current-members"],children:[Object(p.jsx)("h2",{children:"Current students"}),0===this.state.members.length?Object(p.jsx)("p",{children:"None"}):null,this.state.members.map((function(e,t){return Object(p.jsx)(Z,{student:e.student,role:e.role},"member-"+t)}))]})]}),Object(p.jsxs)(w,{children:[Object(p.jsx)("h2",{children:"Add student to the group"}),Object(p.jsxs)(w,{className:Oe.a["select-student-type"],children:[Object(p.jsx)("label",{htmlFor:"radio_existing",children:"Choose existing"}),Object(p.jsx)("input",{id:"radio_existing",name:"existingOrNew",type:"radio",checked:this.state.addExisting,onChange:function(){return t.setState((function(e){return{addExisting:!0}}))}}),Object(p.jsx)("label",{htmlFor:"radio_new",children:"Create new"}),Object(p.jsx)("input",{id:"radio_new",name:"existingOrNew",type:"radio",checked:!this.state.addExisting,onChange:function(){return t.setState((function(e){return{addExisting:!1}}))}})]}),Object(p.jsxs)(w,{className:Oe.a["select-role"],children:[Object(p.jsx)("label",{htmlFor:"member-role",children:"Role:"}),Object(p.jsx)("input",{id:"member-role",type:"text",value:this.state.role,onChange:function(e){return t.setState({role:e.target.value})},required:!0})]}),this.state.addExisting?Object(p.jsxs)("form",{className:Oe.a["find-student"],onSubmit:function(e){e.preventDefault(),t.addMember(t.props.students[+e.target.elements.selectedStudents.value])},children:[Object(p.jsx)(ge,{name:"selectedStudents",options:this.props.students.filter((function(e){return!t.state.members.map((function(e){return e.student})).includes(e)})).map((function(e){return"".concat(e.name,": ").concat(e.subjects)}))}),Object(p.jsx)(q,{type:"submit",children:"Add student"})]}):Object(p.jsx)(xe,{onNewStudent:this.addMember})]})]})}}]),n}(c.a.Component),we=function(e){var t,n=Object(r.useState)(null!==(t=e.selection)&&void 0!==t?t:null),c=Object(d.a)(n,2),s=c[0],u=c[1],a=null;return"student"===s?a=Object(p.jsx)(xe,{prototype:e.prototype,onNewStudent:e.onNewStudent}):"group"===s&&(a=Object(p.jsx)(ve,{prototype:e.prototype,onNewGroup:e.onNewGroup,students:e.students})),Object(p.jsxs)(w,{children:[Object(p.jsxs)("center",{className:Oe.a.choice,children:[Object(p.jsx)("label",{htmlFor:"radio_student",children:"Student"}),Object(p.jsx)("input",{id:"radio_student",name:"studentOrGroup",type:"radio",checked:"student"===s,onChange:function(){return u("student")}}),Object(p.jsx)("label",{htmlFor:"radio_group",children:"Group"}),Object(p.jsx)("input",{id:"radio_group",name:"studentOrGroup",type:"radio",checked:"group"===s,onChange:function(){return u("group")}})]}),a]})},ye=n(13),_e=n(89),Se=n.n(_e),Ne=n(155),ke=n.n(Ne),Ce=function(e){var t=e.text;return Object(p.jsx)(w,{className:ke.a.popup,children:t})},Fe=function(e){var t=e.text,n=e.duration,c=e.show,s=e.onClear;return Object(r.useEffect)((function(){c&&setTimeout((function(){s()}),n)}),[n,c,s]),Se.a.createPortal(c&&Object(p.jsx)(Ce,{text:t}),document.getElementById("popup-holder"))},Ee=function(e){var t=Object(ye.h)(),n=t.type,c=t.id,s=Object(r.useState)(""),u=Object(d.a)(s,2),a=u[0],o=u[1],i=Object(r.useState)(!1),j=Object(d.a)(i,2),l=j[0],b=j[1],O=null;switch(n){case"student":O=Object(p.jsx)(F,{student:e.students[+c]});break;case"group":O=Object(p.jsx)(z,{group:e.groups[+c]})}return Object(p.jsxs)("div",{children:[Object(p.jsx)(Fe,{text:"Message sent to ".concat(n,"."),duration:"2000",show:l,onClear:function(){return b(!1)}}),Object(p.jsxs)("center",{children:[Object(p.jsx)("div",{children:O}),Object(p.jsxs)("form",{className:R.a.form,onSubmit:function(e){e.preventDefault(),b(!0),o("")},children:[Object(p.jsx)("textarea",{id:"group-description",rows:"5",value:a,onChange:function(e){o(e.target.value)},required:!0,autoFocus:!0}),Object(p.jsx)("br",{}),Object(p.jsx)(q,{type:"submit",children:"Send"})]})]})]})},Ge=function(e){var t=Object(ye.h)().id,n=e.students[t];return n?Object(p.jsx)("center",{children:Object(p.jsx)(F,{student:n})}):Object(p.jsx)("p",{children:"Invalid ID."})},Ie=function(e){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(w,{children:[Object(p.jsx)("h1",{children:"Students"}),e.students.map(J)]}),Object(p.jsxs)(w,{children:[Object(p.jsx)("h1",{children:"Groups"}),e.groups.map(W)]})]})},qe=function(e){var t=Object(ye.h)(),n=t.id,r=t.type;return"student"===r&&Object(p.jsx)(xe,{text:"Edit Student",prototype:e.students[n],onNewStudent:function(t){return e.onStudentEdit(t,n)}})||"group"===r&&Object(p.jsx)(ve,{text:"Edit Group",prototype:e.groups[n],onNewGroup:function(t){return e.onGroupEdit(t,n)},students:e.students})||Object(p.jsx)("p",{children:"wtf"})},Ae=["uid"],Re=["uid"],Le=function(e,t){var n,c=Object(r.useState)(null!==(n=JSON.parse(localStorage.getItem(e)))&&void 0!==n?n:t),s=Object(d.a)(c,2),u=s[0],a=s[1];return[u,function(t){return a((function(n){var r=[].concat(Object(j.a)(n),[t]);return localStorage.setItem(e,JSON.stringify(r)),r}))},function(t){a(t),localStorage.setItem(e,JSON.stringify(t))}]},Me=function(e,t){var n,r={students:new Set(e.students),groups:new Set(e.groups)};switch(t.in){case"student":n=r.students;break;case"group":n=r.groups;break;default:throw new Error("Invalid dispatch type ".concat(t.in,"."))}switch(t.do){case"add":n.add(t.value);break;case"remove":n.delete(t.value);break;default:throw new Error("Invalid action ".concat(t.do,"."))}return r};var Pe=function(){var e,t=Object(ye.g)(),n=Object(r.useState)([]),c=Object(d.a)(n,2),s=c[0],u=c[1],l=Object(r.useState)([]),O=Object(d.a)(l,2),h=O[0],x=O[1],f=function(){var e=Object(o.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object($.a)(Object($.b)(ne,"groups"),t).then((function(e){return x((function(n){return[Object(i.a)({uid:e.id},t)].concat(Object(j.a)(n))}))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(o.a)(b.a.mark((function e(t,n){var r,c,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.uid,c=Object(a.a)(t,Ae),console.log("edit student",r,c),e.prev=2,s=Object($.c)(ne,"students",t.uid),e.next=6,Object($.h)(s,c).then((function(){return u((function(e){var r=Object(j.a)(e);return r[n]=t,r}))}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),alert(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(o.a)(b.a.mark((function e(t,n){var r,c,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.uid,c=Object(a.a)(t,Re),console.log("edit group",r,c),e.prev=2,s=Object($.c)(ne,"groups",t.uid),e.next=6,Object($.h)(s,c).then((function(){return x((function(e){var r=Object(j.a)(e);return r[n]=t,r}))}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),alert(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,n){return e.apply(this,arguments)}}(),v=Le("currentUser",[]),w=Object(d.a)(v,3),y=w[0],_=w[2],S=Le("users",[]),N=Object(d.a)(S,2),k=N[0],C=N[1],F=function(e){return _([e])},E=null!==(e=y[0])&&void 0!==e?e:null;console.log(E);var G=Object(r.useReducer)(Me,{students:new Set,groups:new Set}),I=Object(d.a)(G,2),q=I[0],A=I[1],R=Object(r.useState)(!1),L=Object(d.a)(R,2)[1],P=function(){return L((function(e){return!e}))},U=Object(r.useMemo)((function(){return{currentUser:E,setUser:F,users:k,addUser:C,follows:q,dispatch:A,refresh:P}}),[E,k,q]),D=function(e,n){return function(){e.apply(void 0,arguments),t(n)}};return Object(r.useEffect)((function(){var e=function(){var e=Object(o.a)(b.a.mark((function e(){var t,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($.e)(Object($.b)(ne,"students"));case 2:return t=e.sent,n=[],t.forEach((function(e){return n.push(Object(i.a)({uid:e.id},e.data()))})),e.next=7,Promise.all(n.map(function(){var e=Object(o.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.img){e.next=7;break}return e.next=3,he();case 3:return n=e.sent,e.abrupt("return",Object(i.a)(Object(i.a)({},t),{},{img:n}));case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:r=e.sent,u(r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(o.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($.e)(Object($.b)(ne,"groups"));case 2:t=e.sent,n=[],t.forEach((function(e){return n.push(Object(i.a)({uid:e.id},e.data()))})),console.log("set groups: ",n),x(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),t()}),[]),Object(p.jsx)(M.Provider,{value:U,children:Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)("header",{children:Object(p.jsx)(ie,{})}),Object(p.jsx)("main",{children:Object(p.jsxs)(ye.d,{children:[Object(p.jsx)(ye.b,{path:"/students",element:Object(p.jsx)(B,{elems:s})}),Object(p.jsx)(ye.b,{path:"/groups",element:Object(p.jsx)(X,{elems:h})}),Object(p.jsx)(ye.b,{path:"/add",element:Object(p.jsx)(we,{onNewStudent:D((function(e){try{Object($.a)(Object($.b)(ne,"students"),e).then((function(t){return u((function(n){return[Object(i.a)({uid:t.id},e)].concat(Object(j.a)(n))}))}))}catch(t){alert(t)}}),"/students"),onNewGroup:D(f,"/groups"),students:s})}),Object(p.jsx)(ye.b,{path:"/edit/:type/:id",element:Object(p.jsx)(qe,{students:s,groups:h,onStudentEdit:D(m,"/students"),onGroupEdit:D(g,"/groups")})}),Object(p.jsx)(ye.b,{path:"/:type/:id/send",element:s&&h?Object(p.jsx)(Ee,{students:s,groups:h}):Object(p.jsx)("p",{children:"Loading st00d"})}),Object(p.jsx)(ye.b,{path:"/login",element:Object(p.jsx)(oe,{})}),Object(p.jsx)(ye.b,{path:"/:id/profile",element:s&&Object(p.jsx)(Ge,{students:s})}),Object(p.jsx)(ye.b,{path:"/following",element:Object(p.jsx)(Ie,{students:s.filter((function(e){return q.students.has(e.name)})),groups:h.filter((function(e){return q.groups.has(e.name)}))})}),Object(p.jsx)(ye.b,{exact:!0,path:"/",element:Object(p.jsx)(ye.a,{replace:!0,to:"/students"})})]})})]})})},Ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,272)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,u=t.getTTFB;n(e),r(e),c(e),s(e),u(e)}))};u.a.createRoot(document.getElementById("root")).render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(E.a,{basename:"/PIWbois/6/std-prjs/build/",children:Object(p.jsx)(Pe,{})})})),Ue()},32:function(e,t,n){e.exports={choice:"Add_choice__XJtvp","add-group":"Add_add-group__2CFX_","current-members":"Add_current-members__28rxE","select-student-type":"Add_select-student-type__ojU7t","select-role":"Add_select-role__2xgZq","add-student":"Add_add-student__2Ly-E","find-student":"Add_find-student__2TLOq"}},41:function(e,t,n){e.exports={"group-entry":"Group_group-entry__Zshr9","group-card":"Group_group-card__1oueC","group-member":"Group_group-member__s5tdK"}},62:function(e,t,n){e.exports={"student-card":"Student_student-card__2z8Nu","student-entry":"Student_student-entry__1pg5c"}},63:function(e,t,n){e.exports={button:"SendMessage_button__2aYM3",form:"SendMessage_form__3Cl9H"}}},[[271,1,2]]]);
//# sourceMappingURL=main.573d7470.chunk.js.map